<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <title>
    <%= product.title %> - Scab Impex
  </title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="/style.css" />
  <script src="https://kit.fontawesome.com/a2e0e9c1b2.js" crossorigin="anonymous"></script>
  <style>
body {
  font-family: 'Segoe UI', Roboto, sans-serif;
  margin: 0;
  padding: 0;
  background: #f4f4f4;
}

.product-detail {
  padding: 40px 15px;
  background: #fff;
}

.detail-container {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  align-items: flex-start;
  max-width: 1200px;
  margin: 0 auto;
  gap: 24px;
}

.carousel-container {
  flex: 1 1 460px;
  max-width: 480px;
  position: relative;
}

.carousel-img {
  display: none;
  width: 100%;
  height: 420px;
  object-fit: cover;
  border-radius: 10px;
  box-shadow: 0 2px 14px rgba(0, 0, 0, 0.15);
  transition: 0.3s ease;
}

.carousel-img.active {
  display: block;
}

.carousel-btn {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  background: rgba(0, 0, 0, 0.5);
  color: white;
  border: none;
  font-size: 22px;
  padding: 10px;
  border-radius: 50%;
  cursor: pointer;
  z-index: 10;
}
.carousel-btn.prev { left: 10px; }
.carousel-btn.next { right: 10px; }

.detail-info {
  flex: 1 1 460px;
  max-width: 500px;
  padding-top: 5px;
}

.detail-info h1 {
  font-size: 26px;
  margin-bottom: 15px;
  color: #222;
  font-weight: 600;
}

.description {
  margin-bottom: 20px;
  font-size: 15.5px;
  line-height: 1.5;
  color: #333;
}

.card-buttons {
  display: flex;
  gap: 12px;
  flex-wrap: wrap;
}

.buy-btn,
.cart-btn {
  padding: 12px 22px;
  font-size: 15px;
  border: none;
  border-radius: 6px;
  cursor: pointer;
  transition: background 0.3s ease;
}

.buy-btn {
  background-color: #007bff;
  color: white;
}

.buy-btn:hover {
  background-color: #0056b3;
}

.cart-btn {
  background-color: #f57c00;
  color: white;
}

.cart-btn:hover {
  background-color: #d06600;
}

.back-link {
  display: inline-block;
  margin-top: 20px;
  font-size: 14px;
  color: #007bff;
  text-decoration: none;
}

/* ✅ Responsive */
@media (max-width: 1024px) {
  .carousel-img { height: 350px; }
  .carousel-btn { font-size: 20px; padding: 8px; }
}

@media (max-width: 768px) {
  .detail-container {
    flex-direction: column;
    align-items: center;
    gap: 20px;
  }
  .carousel-img {
    height: 280px;
  }
  .detail-info {
    padding: 0 10px;
    text-align: center;
  }
  .card-buttons {
    flex-direction: column;
    align-items: center;
    width: 100%;
  }
  .buy-btn, .cart-btn {
    width: 90%;
    max-width: 300px;
  }
  .carousel-btn {
    top: 50%; /* FIXED vertical center on mobile */
  }
}

@media (max-width: 480px) {
  .carousel-img {
    height: 240px;
  }
}
</style>

</head>

<body>

  <!-- ✅ Navbar -->
  <nav class="navbar">
    <div class="logo">
      <img src="/logo.png" alt="Scab Impex" style="height: 50px;">
    </div>
    <div class="hamburger" onclick="toggleMenu(this)">
      <div class="bar bar1"></div>
      <div class="bar bar2"></div>
    </div>
    <div class="nav-links" id="navLinks">
      <a href="/">Home</a>
      <a href="/products">Products</a>
      <a href="/faq">FAQ</a>
      <a href="/privacy-policy">Privacy</a>
    </div>
  </nav>

  <!-- ✅ Product Detail Section -->
  <section class="product-detail">
    <div class="detail-container">

      <!-- Image Carousel -->
      <div class="carousel-container">
        <% if (product.images && product.images.length> 0) { %>
          <% product.images.forEach((img, i)=> { %>
            <img src="/<%= img.trim() %>" class="carousel-img <%= i === 0 ? 'active' : '' %>"
              alt="Product image <%= i + 1 %>">
            <% }) %>

              <% if (product.images.length> 1) { %>
                <button class="carousel-btn prev" onclick="prevSlide()">&#10094;</button>
                <button class="carousel-btn next" onclick="nextSlide()">&#10095;</button>
                <% } %>
                  <% } else { %>
                    <p>No image available</p>
                    <% } %>
      </div>

      <!-- Product Info -->
      <div class="detail-info">
        <h1>
          <%= product.title %>
        </h1>
        <p class="description">
          <%= product.description %>
        </p>

        <div class="product-actions">
 <a href="/buy-now?id=<%= product.id %>" class="btn-buy">Buy Now</a>

  <button class="btn-cart">Add to Cart</button>
</div>


        <a href="/products" class="back-link"><i class="fas fa-arrow-left"></i> Back to Products</a>
      </div>

    </div>
  </section>

  <!-- ✅ Footer -->
  <footer class="footer">
    <div class="footer-container">
      <div class="footer-links">
        <div>
          <h4>Company</h4>
          <ul>
            <li><a href="/">Home</a></li>
            <li><a href="/about">About Us</a></li>
            <li><a href="/products">Products</a></li>
            <li><a href="#contact">Contact</a></li>
          </ul>
        </div>

        <div>
          <h4>Support</h4>
          <ul>
            <li><a href="/privacy-policy">Privacy Policy</a></li>
            <li><a href="/terms">Terms & Conditions</a></li>
            <li><a href="/faq">FAQs</a></li>
          </ul>
        </div>

        <div>
          <h4>Contact</h4>
          <ul>
            <li><i class="fas fa-envelope"></i> <a href="mailto:scabimpex@outlook.com">scabimpex@outlook.com</a></li>
          </ul>
        </div>
      </div>
      <hr />
      <div class="footer-bottom">
        <p>&copy; 2025 Scab Impex. All rights reserved.</p>
      </div>
    </div>
  </footer>

<!-- ✅ Scripts -->
 <script>
  // Handle Add to Cart buttons on product cards
  document.querySelectorAll('.btn-cart').forEach((button, index) => {
    button.addEventListener('click', function () {
      const productBox = button.closest('.product-box');
      const title = productBox.querySelector('h3').innerText;
      const image = productBox.querySelector('.product-carousel img').getAttribute('src');

      const item = { id: Date.now().toString(), title, image };
      const cart = JSON.parse(localStorage.getItem('scabCart') || '[]');
      cart.push(item);
      localStorage.setItem('scabCart', JSON.stringify(cart));

      alert(`✅ "${title}" added to cart.`);
    });
  });
</script>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    // Toggle Hamburger Menu
    function toggleMenu(btn) {
      const nav = document.getElementById('navLinks');
      nav.classList.toggle('active');
      btn.classList.toggle('active');
    }
    window.toggleMenu = toggleMenu; // So inline HTML can access it

    // Image Carousel
    const slides = document.querySelectorAll('.carousel-img');
    let current = 0;

    function showSlide(index) {
      slides.forEach(img => img.classList.remove('active'));
      if (slides[index]) slides[index].classList.add('active');
    }

    function nextSlide() {
      current = (current + 1) % slides.length;
      showSlide(current);
    }

    function prevSlide() {
      current = (current - 1 + slides.length) % slides.length;
      showSlide(current);
    }

    window.nextSlide = nextSlide;
    window.prevSlide = prevSlide;
    showSlide(current);

    // Add to Cart Logic
    const addToCartBtn = document.querySelector('.cart-btn');
    if (addToCartBtn) {
      addToCartBtn.addEventListener('click', () => {
        const item = {
          id: "<%= product.id %>",
          title: "<%= product.title %>",
          image: "<%= product.images && product.images.length > 0 ? product.images[0] : '' %>"
        };

        const cart = JSON.parse(localStorage.getItem('scabCart') || '[]');
        cart.push(item);
        localStorage.setItem('scabCart', JSON.stringify(cart));
      });
    }
  });
</script>


</body>
</html>